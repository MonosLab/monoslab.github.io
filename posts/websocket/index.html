<!DOCTYPE html><html lang="ko-KR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="[ ETC ] 웹소켓" /><meta name="author" content="Kwangsoo Seo" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="Contents" /><meta property="og:description" content="Contents" /><link rel="canonical" href="https://monoslab.github.io/posts/websocket/" /><meta property="og:url" content="https://monoslab.github.io/posts/websocket/" /><meta property="og:site_name" content="MonosLab" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-10-28T06:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[ ETC ] 웹소켓" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Kwangsoo Seo" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Kwangsoo Seo"},"dateModified":"2023-03-03T15:19:08+09:00","datePublished":"2022-10-28T06:00:00+09:00","description":"Contents","headline":"[ ETC ] 웹소켓","mainEntityOfPage":{"@type":"WebPage","@id":"https://monoslab.github.io/posts/websocket/"},"url":"https://monoslab.github.io/posts/websocket/"}</script><title>[ ETC ] 웹소켓 | MonosLab</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="MonosLab"><meta name="application-name" content="MonosLab"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">MonosLab</a></div><div class="site-subtitle font-italic">Season 1</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <img src="/assets/img/default/home.png" alt="home" onerror="this.style.display='none'"> <span>홈</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <img src="/assets/img/default/categories.png" alt="categories" onerror="this.style.display='none'"> <span>카테고리</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <img src="/assets/img/default/archives.png" alt="archives" onerror="this.style.display='none'"> <span>타임라인</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <img src="/assets/img/default/tags.png" alt="tags" onerror="this.style.display='none'"> <span>태그</span> </a><li class="nav-item"> <a href="/portfolio/" class="nav-link"> <img src="/assets/img/default/portfolio.png" alt="portfolio" onerror="this.style.display='none'"> <span>주요 경력</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <img src="/assets/img/default/about.png" alt="about" onerror="this.style.display='none'"> <span>정보</span> </a></ul><footer class="d-flex w-100 justify-content-left"><div class="d-flex justify-content-between align-items-left text-muted"><div class="footer-left"><p class="mb-1" style="vertical-align: top;"> <a href="https://en.wikipedia.org/wiki/Creative_Commons_license" target="_blank"><img width="88" height="31" src="/assets/img/cc_by-nc_icon.png" alt="cc" onerror="this.style.display='none'"></a> &nbsp;&nbsp;&nbsp;<img src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fgithub.com%2FMonosLab%2Fhit-counter&count_bg=%2379C83D&title_bg=%23909090&icon=&icon_color=%23E7E7E7&title=hits&edge_flat=false" alt="count" onerror="this.style.display='none'"></p><p class="mb-0"> ©2025 <a href="https://www.youtube.com/channel/UCypXLJ4v42wl5FOsLebYiOg">MonosLab</a>. <span data-toggle="tooltip" data-placement="top" title="명시되지 않는 한 이 사이트의 블로그 게시물은 작성자의 Creative Commons Attribution 4.0 International(CC BY 4.0) 라이선스에 따라 사용이 허가되었습니다.">일부 권리 보유</span> <br/> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> 홈 </a> </span> <span>[ ETC ] 웹소켓</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 포스트</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="검색..."> </span> <span id="search-cancel" >취소</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[ ETC ] 웹소켓</h1><div class="post-meta text-muted"> <span> 게시 <em class="" data-ts="1666904400" data-df="YYYY-MM-DD" data-toggle="tooltip" data-placement="bottom"> 2022-10-28 </em> </span> <span> 업데이트 <em class="" data-ts="1677824348" data-df="YYYY-MM-DD" data-toggle="tooltip" data-placement="bottom"> 2023-03-03 </em> </span><div class="d-flex justify-content-between"> <span> By <em> MonosLab </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2637 단어"> <em>14 분</em>읽는 시간</span></div></div></div><div class="post-content"><p class="no_toc"><a href="http://hits.dwyl.com/MonosLab/post17"><img data-src="https://hits.dwyl.com/MonosLab/post17.svg?style=flat-square&amp;show=https://raw.githubusercontent.com/cotes2020/chirpy-images/mainunique" alt="HitCount" data-proofer-ignore></a></p><hr /><p class="no_toc"><strong>Contents</strong></p><ul id="markdown-toc"><li><a href="#웹소켓" id="markdown-toc-웹소켓">웹소켓</a><li><a href="#1-http와-websocket의-비교" id="markdown-toc-1-http와-websocket의-비교">1. HTTP와 WebSocket의 비교</a><ul><li><a href="#http" id="markdown-toc-http">HTTP</a><li><a href="#websocket" id="markdown-toc-websocket">WebSocket</a><li><a href="#공통점" id="markdown-toc-공통점">공통점</a><li><a href="#차이점" id="markdown-toc-차이점">차이점</a></ul><li><a href="#2-웹소켓-이전의-실시간-통신-방법http-comet" id="markdown-toc-2-웹소켓-이전의-실시간-통신-방법http-comet">2. 웹소켓 이전의 실시간 통신 방법(HTTP Comet)</a><ul><li><a href="#polling" id="markdown-toc-polling">polling</a><li><a href="#long-polling" id="markdown-toc-long-polling">long polling</a><li><a href="#multipart-streaming" id="markdown-toc-multipart-streaming">(Multipart) streaming</a></ul><li><a href="#3-웹-소켓-동작-방법" id="markdown-toc-3-웹-소켓-동작-방법">3. 웹 소켓 동작 방법</a><li><a href="#4-웹소켓-프로토콜의-데이터-프레임" id="markdown-toc-4-웹소켓-프로토콜의-데이터-프레임">4. 웹소켓 프로토콜의 데이터 프레임</a><li><a href="#5-조건에-따른-적절한-활용" id="markdown-toc-5-조건에-따른-적절한-활용">5. 조건에 따른 적절한 활용</a><ul><li><a href="#http-1" id="markdown-toc-http-1">http</a><li><a href="#websocket-1" id="markdown-toc-websocket-1">WebSocket</a></ul><li><a href="#6-참고-자료" id="markdown-toc-6-참고-자료">6. 참고 자료</a></ul><hr /><h1 id="웹소켓">웹소켓</h1><p>웹소켓은 HTML5에 포함된 표준 기술로서 HTTP 환경에서 서버와 클라이언트간에 지속적인 연결을 통해 실시간으로 전이중방식(Full-Duplex)의 통신을 가능하게 하는 프로토콜입니다.</p><blockquote><ul><li>단방향(Simplex) 통신 : 한쪽 방향으로만 전송이 가능한 방식 (예) 라디오, TV<li>전이중(Full-Duplex) 통신 : 동시에 양방향 전송이 가능한 방식으로, 전송량이 많고, 전송 매체의 용량이 클 때 사용 (예) 전화, 전용선을 이용한 데이터 통신<li>반이중(Half-Duplex) 통신 : 양방향 전송이 가능하지만 동시에 양쪽 방향에서 전송할 수 없는 방식 (예) 무전기, 모뎀을 이용한 데이터 통신</ul></blockquote><p>HTTP와 마찬가지로 OSI 제7계층에 속하며, 제4계층의 TCP에 의존적입니다. 2011년 IETF에 의해 RFC 6455로 표준화 되었으며, W3C에 의해 웹 IDL의 웹소켓 API가 표준화 되었습니다.</p><blockquote><p>웹 IDL은 웹 브라우저에 구현되는 Application Programming Interface(API; 응용 프로그램프로그래밍 인터페이스)를 기술하기 위한 Interface Description Language(IDL; 인터페이스 기술 언어) 형식입니다.</p></blockquote><h1 id="1-http와-websocket의-비교">1. HTTP와 WebSocket의 비교</h1><h3 id="http"><span class="mr-2">HTTP</span><a href="#http" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>서버와 클라이언트가 서로 연결을 유지하며 데이터를 관리하면 자원이 필요하기 때문에 요청이 올때만 응답을 함(Stateless) <br /> a. 클라이언트의 요청이 있을 때마다 매번 새로운 커넥션을 생성하고 작업이 끝나면 커넥션이 닫힘. (Half-Duplex) <br /> b. 형식을 따르기만 하면 쉽게 해석 가능 <br /> c. 인터넷 역사상 가장 성공적인 프로토콜(즉시 사용할 수 있는 엄청난 수의 서버/클라이언트 애플리케이션들과 역시 엄청난 수의 (게다가 품질도 뛰어난)라이브러리들을 가지고 있음.)</p><h3 id="websocket"><span class="mr-2">WebSocket</span><a href="#websocket" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>한번의 연결으로 지속적으로 서로간 데이터를 보낼 수 있음 (StateFull) <br /> a. HTML5 표준 기술, 사용자의 브라우저와 서버 사이의 동적인 양방향 연결 채널을 구성. (Full-Duplex) <br /> b. Header가 상당히 작아 Overhead가 적음. <br /> c. 형식이 정해져 있지 않아 해석이 어려움. <br /> d. UTF8 포멧의 메시지 스트림만 허용 (참고 : 일반 소켓 통신의 경우 Bytes 스트림을 사용)</p><h3 id="공통점"><span class="mr-2">공통점</span><a href="#공통점" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>a. OSI 모델 7계층, 4계층의 TCP에 의존 <br /> b. 기본적으로 80포트, 443포트 위에 동작(변경 가능) <br /> c. HTTP 프록시 및 중간 층을 지원하도록 설계</p><h3 id="차이점"><span class="mr-2">차이점</span><a href="#차이점" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>a. 클라이언트에 의해 요청을 받는 방식이 아닌, 서버가 내용을 클라이언트에 보내는 표준화된 방식을 제공 <br /> b. 연결이 유지된 상태에서 메시지들을 오갈 수 있게 허용함 <br /> c. 양방향 대화 방식 <br /> d. 통신은 TCP 포트 80(TLS 암호화 연결의 경우 443)를 통해 수행되며 방화벽을 통해 웹이 아닌 인터넷 연결을 차단하는 일부 환경에 도움. <br /> e. TCP 위에서 메시지 스트리밍을 가능케 함. <br /> f. TCP 단독으로는 메시지의 상속 개념 없이 바이트 스트림을 다룬다. (?) <br /> g. WebSocket 프로토콜은 접속 확립에 HTTP를 사용하지만, 그 후 통신은 WebSocket 독자의 프로토콜로 이루어짐.</p><h1 id="2-웹소켓-이전의-실시간-통신-방법http-comet">2. 웹소켓 이전의 실시간 통신 방법(HTTP Comet)</h1><p>Comet은 HTTP상에서 데이터를 push하기 위한 방식 자체를 일컫는 모든 기술을 말합니다. 가장 대표적인 것들은 아래의 3가지가 있습니다.</p><h3 id="polling"><span class="mr-2">polling</span><a href="#polling" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>서버로 일정 주기로 요청<li>실시간 통신에서는 언제 통신이 발생할지 예측이 불가하여, 불필요한 요청과 커넥션이 발생</ul><h3 id="long-polling"><span class="mr-2">long polling</span><a href="#long-polling" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>서버에 요청하고 응답을 받기 전까지 연결을 유지.<li>많은 양의 메시지가 발생할 경우 polling과 유사.</ul><h3 id="multipart-streaming"><span class="mr-2">(Multipart) streaming</span><a href="#multipart-streaming" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>서버에 요청을 보내고 연속적으로 데이터를 수신.<li>클라이언트에서 서버로의 데이터 송신이 어려움.</ul><blockquote><p>Multipart streaming은 multipart/x-mixed-replace를 이용해서, 연결을 끊지 않고 하나의 HTTP 연결에서 데이터를 보내는 방식입니다.. 서버측은 Content-type를 multipart/x-mixed-replace로 하고 스트림 메시지의 boundary를 구분하기 위한 boundary문자를 정의하면 됩니다.</p></blockquote><h1 id="3-웹-소켓-동작-방법">3. 웹 소켓 동작 방법</h1><p>연결 수립 과정은 HTTP를 이용합니다.</p><ul><li>최초 접속시 HTTP 프로토콜 위에 HandShaking을 위해 HTTP Header를 사용 (기본 포트 HTTP : 80, HTTPS : 443 이용)<div class="language-html highlighter-rouge"><div class="code-header"> <span data-label-text="HTML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>GET /mychat HTTP/1.1
Host: server.example.com
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw==
Sec-WebSocket-Protocol: chat
Sec-WebSocket-Version: 13
Origin: http://example.com
</pre></table></code></div></div></ul><center>&lt; HTTP기반의 연결을 WebSocket기반으로 upgrade하겠다고 요청하는 과정 &gt;</center><ul><li>HTTP를 웹소켓 프로토콜로 바꾸기 위해 Protocol switching 과정을 진행<div class="language-html highlighter-rouge"><div class="code-header"> <span data-label-text="HTML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: HSmrc0sMlYUkAGmm5OPpG2HaGWk=
Sec-WebSocket-Protocol: chat
</pre></table></code></div></div></ul><center>&lt; HTTP를 WebSocket으로 switching 하겠다고 응답하는 과정 &gt;</center><ul><li>HTTP 대신 WS와 WSS 프로토콜로 데이터 송/수신(UTF8인코딩 데이터를 0x00과 0xff 사이에 데이터를 넣어 보냄) <br /> b. 연결 수립 후 서버와 클라이언트 간에 TCP/IP 기반 웹 소켓 연결이 이루어지고, 일정 시간이 지나면 HTTP 연결은 자동으로 끊김 <br /> c. 프레임으로 구성된 메시지라는 논리적 단위로 송/수신</ul><h1 id="4-웹소켓-프로토콜의-데이터-프레임">4. 웹소켓 프로토콜의 데이터 프레임</h1><p><img data-src="https://monoslab.github.io/assets/img/posts/websocket_data_frame.png" alt="WebSocketDataFrame" data-proofer-ignore></p><p>RSV1-3 는 사용되지 않습니다. 이 필드들은 확장 프로토콜 또는 미래를 위해 예약되었습니다.</p><p>MASK 비트는 메세지가 인코딩되어있는지의 여부를 나타냅니다.클라이언트가 서버로 보내는 메세지는 항상 마스킹되어야합니다. 따라서 서버는 클라이언트로부터 받은 이 필드가 항상 1임을 기대할 수 있습니다. (만약 클라이언트가 마스킹되지 않은 메세지를 보낸다면 서버는 연결을 종료해야 합니다. 참고 : section 5.1 of the spec ). 서버가 클라이언트에게 보내는 메세지는 MASK 필드가 항상 0이고 데이터는 마스킹되지 않은 상태여야 합니다. 마스킹이 어떻게 이루어지는지 / 마스킹된 메세지를 어떻게 디코딩하는지는 나중에 설명합니다. (주의: wss 연결이라고 하더라도 클라이언트가 보내는 패킷은 항상 마스킹되어야 합니다.)</p><p>opcode 필드는 뒤따라오는 payload 데이터가 어떠한 포멧인지를 나타냅니다. 0x0은 continuation, 0x1은 텍스트(항상 UTF-8), 0x2는 바이너리 데이터 / 나머지 값은 “컨트롤 코드”에 사용됩니다. (컨트롤 코드에 대해서는 나중에 다루게 됩니다.) 현재 버전의 웹소켓 프로토콜에서는 0x3 / 0x7 / 0xB~0xF는 아무런 의미도 지니고있지 않습니다.</p><p>FIN 비트는 이 메세지가 마지막임을 나타냅니다. 만약 FIN 비트가 0이라면 서버는 뒤에 더 따라오게 될 메세지들까지 수신해야 합니다. FIN 비트가 1일 경우에는 전체 메세지가 수신되었으므로 이를 처리합니다. 이 부분에 대해서는 뒤에 다시 설명합니다.</p><p>Payload 길이 알아내기 수신한 프레임으로부터 payload 데이터를 읽기 위해서는 payload length 필드를 읽어야 합니다. 불행히도 이는 약간 복잡한 작업을 거치는데 아래 순서대로 처리해 주세요.</p><p>9번째부터 15번째까지의 비트를 읽습니다. 이를 unsigned integer로 취급한 다음 값이 125거나 이보다 작을 경우 이 자체가 payload length 입니다. 이 경우에는 2, 3 과정은 필요 없습니다. 하지만 126이면 2번으로, 127일 경우 3번으로 가주세요 다음 16비트를 읽습니다. 이를 unsigned integer로 처리하고 payload length 값으로 사용합니다. 다음 64비트를 읽습니다. 이를 unsigned integer로 처리하고 payload length 값으로 사용합니다. (최상위 비트는 항상 0이어야 합니다.) 마스킹된 Payload 데이터 디코딩하기 MASK 비트가 설정되어 있디만 32비트 사이즈의 Masking-Key 필드 또한 존재하게 됩니다. 아래 의사코드는 Payload 데이터를 ENCODED / Masking-Key 필드를 MASK 라고 가정하고 데이터를 디코딩하는 방법을 보여줍니다. ENCODED값을 0부터 순회하면서 MASK의 i % 4에 해당하는 1바이트와 XOR 연산을 수행합니다.</p><h1 id="5-조건에-따른-적절한-활용">5. 조건에 따른 적절한 활용</h1><h3 id="http-1"><span class="mr-2">http</span><a href="#http-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>실시간 업데이트가 필요하지 않을 때<li>단건의 데이터 요청일 때<li>Restful 서비스로 데이터를 가져올 때<li>단방향 통신(Half-Duplex)<li>대표적인 사용 예 : Ajax를 이용한 개발</ul><h3 id="websocket-1"><span class="mr-2">WebSocket</span><a href="#websocket-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>실시간 업데이트가 필요할 때<li>지속적으로 데이터를 주고 받을 때<li>양방향 통신(Full-Duplex)<li>대표적인 사용 예 : 게임, 채팅 앱 등</ul><h1 id="6-참고-자료">6. 참고 자료</h1><ul><li>https://velog.io/@gth1123/http-vs-socket<li>https://blog.naver.com/pje0721/222835392496<li>https://www.joinc.co.kr/w/man/12/websocket<li>https://ws-pace.tistory.com/104 &lt;그림으로 잘 설명됨&gt;<li>https://kbj96.tistory.com/46<li>https://blog.scaleway.com/iot-hub-what-use-case-for-websockets/<li>https://velog.io/@ranja/%EC%9B%B9-%EC%86%8C%EC%BC%93%EA%B3%BC-HTTP%EC%9D%98-%EC%B0%A8%EC%9D%B4<li>https://developer.mozilla.org/ko/docs/Web/API/WebSockets_API/Writing_WebSocket_servers<li>https://doozi0316.tistory.com/entry/WebSocket%EC%9D%B4%EB%9E%80-%EA%B0%9C%EB%85%90%EA%B3%BC-%EB%8F%99%EC%9E%91-%EA%B3%BC%EC%A0%95-socketio-Polling-Streaming &lt;http header가 잘 설명되어 있음&gt;</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%EC%A0%95%EB%B3%B4/'>정보</a>, <a href='/categories/%ED%8F%AC%EB%A7%B7/'>포맷</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/http/" class="post-tag no-text-decoration" >HTTP</a> <a href="/tags/websocket/" class="post-tag no-text-decoration" >WebSocket</a> <a href="/tags/%EC%9B%B9%EC%86%8C%EC%BC%93/" class="post-tag no-text-decoration" >웹소켓</a> <a href="/tags/comet/" class="post-tag no-text-decoration" >Comet</a> <a href="/tags/%EB%B9%84%EA%B5%90/" class="post-tag no-text-decoration" >비교</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 이 기사는 저작권자의 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 라이센스를 따릅니다.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">공유하기</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%5B+ETC+%5D+%EC%9B%B9%EC%86%8C%EC%BC%93+-+MonosLab&url=https%3A%2F%2Fmonoslab.github.io%2Fposts%2Fwebsocket%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%5B+ETC+%5D+%EC%9B%B9%EC%86%8C%EC%BC%93+-+MonosLab&u=https%3A%2F%2Fmonoslab.github.io%2Fposts%2Fwebsocket%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fmonoslab.github.io%2Fposts%2Fwebsocket%2F&text=%5B+ETC+%5D+%EC%9B%B9%EC%86%8C%EC%BC%93+-+MonosLab" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="링크 복사하기" data-title-succeed="링크가 복사되었습니다!"> </i> </span></div></div></div><script src="https://utteranc.es/client.js" repo="MonosLab/monoslab.github.io" issue-term="pathname" theme="boxy-light" crossorigin="anonymous" async> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">최근 업데이트</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/cpp-msc-version/">[ VC++ ] MSVC 버전 (_MSC_VER, _MSC_FULL_VER)</a><li><a href="/posts/comfyui_cuibox/">[ ComfyUI ] CuiBox 소개</a><li><a href="/posts/comfyui_install/">[ ComfyUI ] ComfyUI 설치</a><li><a href="/posts/comfyui_prompt/">[ ComfyUI ] 프롬프트</a><li><a href="/posts/virus-misdiagnosis-case/">[ 사례 ] 바이러스 오진 사례</a></ul></div><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/rust/">RUST</a> <a class="post-tag" href="/tags/windows/">Windows</a> <a class="post-tag" href="/tags/vc/">VC++</a> <a class="post-tag" href="/tags/tauri/">Tauri</a> <a class="post-tag" href="/tags/solved/">solved</a> <a class="post-tag" href="/tags/ai/">AI</a> <a class="post-tag" href="/tags/comfyui/">ComfyUI</a> <a class="post-tag" href="/tags/error/">Error</a> <a class="post-tag" href="/tags/flutter-3-0/">Flutter 3.0</a> <a class="post-tag" href="/tags/%EC%9D%B8%EA%B3%B5%EC%A7%80%EB%8A%A5/">인공지능</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">바로가기</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>관련된 글</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/fmt-cursor/"><div class="card-body"> <em class="small" data-ts="1657119600" data-df="YYYY-MM-DD" > 2022-07-07 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[ Format ] 커서(Cursor; .cur)</h3><div class="text-muted small"><p> Contents 기본 정보 기본 파일 포맷 기본 정보 최초의 CUR 파일 형식은 1981년 Microsoft의 Windows 1.0 운영 체제에 적용되었으며, 윈도우95부터는 애니메이션이 가능한 .ani 파일도 사용이 가능해졌습니다. .cur 파일은 .ico 파일과 동일하게 정적인 이미지이며, 두 파일 모두 Device-Inde...</p></div></div></a></div><div class="card"> <a href="/posts/cpp-os-version/"><div class="card-body"> <em class="small" data-ts="1658142000" data-df="YYYY-MM-DD" > 2022-07-18 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[ VC++ ] Windows OS 버전 체크</h3><div class="text-muted small"><p> Contents 윈도우 버전 체크 윈도우 버전 체크 윈도우의 버전을 얻어오는 방법은 여러가지가 있으나, GetVersion, GetVersionEx, VerifyVersionInfo 함수 등은 부정확한 버전 정보를 얻어 올 수 있어서 지양하는 것이 좋습니다. Windows 8.1 이상에서는 GetVersion, GetVersi...</p></div></div></a></div><div class="card"> <a href="/posts/cpp-msc-version/"><div class="card-body"> <em class="small" data-ts="1658163600" data-df="YYYY-MM-DD" > 2022-07-19 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[ VC++ ] MSVC 버전 (_MSC_VER, _MSC_FULL_VER)</h3><div class="text-muted small"><p> Contents Visual Studio C++ 버전 관리 규칙 Visual Studio 버전 체크 Visual Studio C++ 버전 관리 규칙 MSVC 컴파일러 버전은 주 버전, 부 버전, 빌드 버전, 수정 버전으로 구성이 되어 있습니다. 컴파일러 매크로 아래의 이미지와 같은 방식으로 필드를 인코딩합니다. 예를 들어 V...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/cs-image-lock/" class="btn btn-outline-primary" prompt="이전 글"><p>[ C# ] Image.FromFile()을 이용하여 이미지를 불러 올때 락(lock) 문제 해결 방법</p></a> <a href="/posts/rust/" class="btn btn-outline-primary" prompt="다음 글"><p>[ RUST ] 러스트</p></a></div></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/rust/">RUST</a> <a class="post-tag" href="/tags/windows/">Windows</a> <a class="post-tag" href="/tags/vc/">VC++</a> <a class="post-tag" href="/tags/tauri/">Tauri</a> <a class="post-tag" href="/tags/solved/">solved</a> <a class="post-tag" href="/tags/ai/">AI</a> <a class="post-tag" href="/tags/comfyui/">ComfyUI</a> <a class="post-tag" href="/tags/error/">Error</a> <a class="post-tag" href="/tags/flutter-3-0/">Flutter 3.0</a> <a class="post-tag" href="/tags/%EC%9D%B8%EA%B3%B5%EC%A7%80%EB%8A%A5/">인공지능</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">검색 결과가 없습니다.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-6RXBCRQDBF"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-6RXBCRQDBF'); }); </script>
