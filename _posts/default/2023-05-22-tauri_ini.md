---
title: "ìš°ë‹¹íƒ•íƒ• íƒ€ìš°ë¦¬ #006ğŸ’¬ INI íŒŒì¼ ê°€ì§€ê³  ë†€ê¸°"
sub: post
author: Kwangsoo Seo
date: 2023-05-22 06:00:00 +0900
categories: [í”„ë¡œê·¸ë˜ë°, RUST]
tags: [RUST, Tauri, Windows, INI]
sitemap:
  changefreq: weekly
  priority : 0.5
---
[![HitCount](https://hits.dwyl.com/MonosLab/post32.svg?style=flat-square&show=unique)](http://hits.dwyl.com/MonosLab/post32)
{:.no_toc}
---
**Contents**
{:.no_toc}

* ToCì™€ êµì²´ë¨
{:toc}  

---
# INI 
INI íŒŒì¼ì€ ë³´í†µ í”„ë¡œê·¸ë¨ì˜ ì‹¤í–‰ì— í•„ìš”í•œ ì„¤ì •ê³¼ ê´€ë ¨í•œ ì •ë³´ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ëª©ì ìœ¼ë¡œ ìƒì„±ëœ í…ìŠ¤íŠ¸ ë¬¸ì„œë¥¼ ë§í•©ë‹ˆë‹¤.

## INI íŒŒì¼ ì½ê¸°/ì“°ê¸°
Cargo.toml íŒŒì¼ì„ ì—´ì–´ ini íŒŒì¼ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì´ë¯¸ ì¶©ë¶„íˆ ê²€ì¦ëœ rust-ini í¬ë ˆì´íŠ¸ë¥¼ ì•„ë˜ì™€ ê°™ì´ ì¶”ê°€í•©ë‹ˆë‹¤.
```
[dependencies]
...
rust-ini = "0.19.0"
```
ì´ì œ main.rsì˜ ì†ŒìŠ¤ë¥¼ ì—´ì–´,
```rust
use std::io::stdout;
use ini::Ini;

const CONF_FILE_NAME: &str = "conf.ini";

fn main() {
    let mut conf = Ini::new();
    conf.with_section(None::<String>).set("encoding", "utf-8");
    conf.with_section(Some("User"))
        .set("name", "âœ”monoslab")
        .set("value", "Pi");
    conf.with_section(Some("Library"))
        .set("name", "í™ê¸¸ë™")
        .set("location", "ëŒ€í•œë¯¼êµ­\x0aì„œìš¸");

    conf.section_mut(Some("Library")).unwrap().insert("seats", "100");

    println!("---------------------------------------");
    println!("Writing to file {:?}\n", CONF_FILE_NAME);
    conf.write_to(&mut stdout()).unwrap();

    conf.write_to_file(CONF_FILE_NAME).unwrap();

    println!("----------------------------------------");
    println!("Reading from file {:?}", CONF_FILE_NAME);
    let ini_file = Ini::load_from_file(CONF_FILE_NAME).unwrap();

    println!("Iterating");
    let general_section_name = "";
    for (sec, prop) in ini_file.iter() {
        let section_name = sec.as_ref().unwrap_or(&general_section_name);
        println!("â— Section: {:?} begins", section_name);
        for (k, v) in prop.iter() {
            println!("{}: {:?}", k, v);
        }
    }
    println!();

    let section = ini_file.section(Some("User")).unwrap();
    println!("name={}", section.get("name").unwrap());
    println!("conf[User][name]={}", &ini_file["User"]["name"]);
    println!("General Section: {:?}", ini_file.general_section());
}
```
ì•„ë˜ëŠ” ìœ„ì˜ ì½”ë“œë¥¼ ì‹¤í–‰ì‹œì¼œ ì–»ì€ ê²°ê³¼ ê°’ì…ë‹ˆë‹¤.
```
----------------------------------------
Writing to file "conf.ini"

encoding=utf-8

[User]
name=âœ”monoslab
value=Pi

[Library]
name=í™ê¸¸ë™
location=ëŒ€í•œë¯¼êµ­\nì„œìš¸
seats=100
----------------------------------------
Reading from file "conf.ini"
Iterating
â— Section: "_Default_"
encoding: "utf-8"
â— Section: "User"
name: "âœ”monoslab"
value: "Pi"
â— Section: "Library"
name: "í™ê¸¸ë™"
location: "ëŒ€í•œë¯¼êµ­\nì„œìš¸"
seats: "100"

name=âœ”monoslab
conf[User][name]=âœ”monoslab
General Section: Properties { data: {"encoding": "utf-8"} }
```

### ini íŒŒì¼ ìƒì„±(ì“°ê¸°)   
ìœ„ì˜ ì˜ˆì œì— ì½”ë“œì—ì„œ ì£¼ìš” ë‚´ìš©ì„ ì‚´í´ë³´ë©´,
```rust
use std::io::stdout;
use ini::Ini;
```
ë¨¼ì € íŒŒì¼ì„ ì½ê³  ì“°ê¸° ìœ„í•´ ëŸ¬ìŠ¤íŠ¸ì˜ ê¸°ë³¸ íŒ¨í‚¤ì§€ì¸ std::io::stdoutì„ ì‚¬ìš©í•˜ì˜€ê³ , ini íŒŒì¼ì˜ ë‚´ìš©ì„ íŒŒì‹±í•˜ê¸° ìœ„í•´ ini::Inië¥¼ ì‚¬ìš©í•˜ê² ë‹¤ê³  ì •ì˜í•˜ì˜€ìŠµë‹ˆë‹¤.

```rust
let mut conf = Ini::new();
conf.with_section(None::<String>).set("encoding", "utf-8");
...
conf.section_mut(Some("Library")).unwrap().insert("seats", "100");
conf.write_to(&mut stdout()).unwrap();
conf.write_to_file(CONF_FILE_NAME).unwrap();
```
ìœ„ì˜ ì½”ë“œëŠ” 
ë®¤í„°ë¸”(mutable)í•œ Ini ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , 
* win_section ë©”ì†Œë“œë¡œ ì„¹ì…˜ ì„¤ì •
* set ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ì—¬ keyì™€ valueê°’ì„ ì„¤ì •

í•©ë‹ˆë‹¤.   
ê·¸ë¦¬ê³  Ini ê°ì²´ì— ë˜ ë‹¤ë¥¸ ì„¹ì…˜ê³¼ key, value ê°’ì„ ì„¤ì •í•˜ê¸° ìœ„í•´

* section_mut ë©”ì†Œë“œë¡œ ì„¹ì…˜ ì¶”ê°€
* insert ë©”ì†Œë“œë¡œ key, value ê°’ì„ ì¶”ê°€

í•©ë‹ˆë‹¤.   
write_to ë©”ì†Œë“œì™€ write_to_file ë©”ì†Œë“œëŠ” ê°ê° ì½˜ì†”ì°½ê³¼ íŒŒì¼ë¡œ ini ê°ì²´ì˜ ë‚´ìš©ì„ ì¶œë ¥í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

### ini íŒŒì¼ ì½ê¸°  
```rust
let ini_file = Ini::load_from_file(CONF_FILE_NAME).unwrap();
...
let section = ini_file.section(Some("User")).unwrap();
println!("name={}", section.get("name").unwrap());
println!("conf[User][name]={}", &ini_file["User"]["name"]);
println!("General Section: {:?}", ini_file.general_section());
```
ìœ„ì˜ ì½”ë“œëŠ” load_from_file ë©”ì†Œë“œë¡œ íŒŒì¼ì„ ì½ì–´ì™€ì„œ section ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ì—¬ ì½ì–´ ì˜¬ ì„¹ì…˜ì„ ì •ì˜í•˜ê³  get ë©”ì†Œë“œì— keyê°’ì„ ë„˜ê²¨ì£¼ì–´ í•´ë‹¹ keyê°’ì˜ ë°ì´í„°ë¥¼ ë„˜ê²¨ ë°›ëŠ” ì˜ˆ ì…ë‹ˆë‹¤. (ini_file.section(...).get(...))   
ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ì§€ ì•Šê³  mapì„ ì´ìš©í•˜ì—¬ &ini_file["User"]["name"]ê³¼ ê°™ì´ ë°”ë¡œ value ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.   
ë§ˆì§€ë§‰ìœ¼ë¡œ general_section ë©”ì†Œë“œëŠ” ì„¹ì…˜ì´ ì„¤ì •ë˜ì§€ ì•Šì€ í•­ëª©ì„ json í¬ë§·ìœ¼ë¡œ ì½ì–´ ì˜µë‹ˆë‹¤.   

